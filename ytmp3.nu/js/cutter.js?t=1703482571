function create(e){return document.createElement(e)}function id(e){return document.getElementById(e)}function select(e){return document.querySelectorAll(e)}function tag(e,t){return document.getElementsByTagName(e)[t]}function setCookie(e){var t=new Date;t.setTime(t.getTime()+6048e5);document.cookie="theme="+e+"; SameSite=Lax; expires="+t.toUTCString()+"; path=/",location.reload()}function error(e){return"file"==e?(select("#phase_0 label")[0].innerHTML="Please select a valid MP3 file",window.setTimeout(function(){select("#phase_0 label")[0].innerHTML="Select MP3"},2e3)):(select("#phase_2 span")[0].innerHTML="An error occurred (e/"+e+").",select("#phase_2 i")[0].remove()),!1}function download(e){var t=create("a");t.href=e,t.innerText="Download",id("phase_2").append(t)}function progress(t,n){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);if(0<e.error)return error(1);switch(e.state){case 0:case 1:select("#phase_2 span")[0].innerHTML="preparing cutting file";break;case 2:select("#phase_2 span")[0].innerHTML="cutting file";break;case 3:select("#phase_2 span")[0].innerHTML="file cutting completed",select("#phase_2 i")[0].remove(),download(n)}e.state<3&&window.setTimeout(function(){progress(t,n)},3e3)}},e.open("GET",t,!0),e.send()}function calculateTime(e){if(!/[0-5]{1}[0-9]{1}\:[0-5]{1}[0-9]{1}/.test(e))return 0;e=e.split(":");return 60*parseInt(e[0])+parseInt(e[1])}id("theme").addEventListener("click",function(e){e.preventDefault();e=this.innerText;"Off"==e?setCookie("dark"):"On"==e&&setCookie("light")}),id("mp3").addEventListener("change",function(){var e={name:this.files[0].name,name_lowercase:this.files[0].name.toLowerCase(),size:(this.files[0].size/1024/1024).toFixed(2)+" MB"};if(!e.name_lowercase.endsWith(".mp3"))return error("file");var t=create("div");t.append(e.name);var n=create("input");n.onclick=function(e){e.preventDefault(),"On"==this.value?(this.value="Off",id("rsp").value=0):"Off"==this.value&&(this.value="On",id("rsp").value=1)},n.name="rsp",n.type="button",n.value="Off";var a=create("div");a.append("Remove Soundless Parts",n);var r=create("div");r.append(a);var i=create("label");i.htmlFor="s",i.innerHTML="Start Time (example: 00:30)";e=create("input");e.id="s",e.maxLength="5",e.name="s",e.type="text",e.pattern="[0-5]{1}[0-9]{1}:[0-5]{1}[0-9]{1}",e.required=!0,e.title="00:00 - 59:59",e.value="00:00",(a=create("div")).append(i,e),r.append(a),(i=create("label")).htmlFor="e",i.innerHTML="End Time (example: 01:30)",(e=create("input")).id="e",e.maxLength="5",e.name="e",e.type="text",e.pattern="[0-5]{1}[0-9]{1}:[0-5]{1}[0-9]{1}",e.required=!0,e.title="00:00 - 59:59",e.value="00:00",(a=create("div")).append(i,e),r.append(a);n=create("input");n.type="submit",n.value="Cut MP3";i=create("input");i.id="rsp",i.type="hidden",i.value="0";e=create("div");e.append(n,i),(a=create("div")).id="phase_1",a.append(t,r,e),id("phase_0").style.display="none",tag("form",0).append(a)}),window.document.forms[0].addEventListener("submit",function(e){e.preventDefault();var t=id("mp3"),n=new FormData;n.append("file",t.files[0]),n.append("rsp",id("rsp").value),n.append("s",calculateTime(id("s").value)),n.append("e",calculateTime(id("e").value));e=create("span");e.innerHTML="preparing file upload";t=create("div");t.append(e,create("i"));e=create("div");e.id="phase_2",e.append(t),id("phase_1").style.display="none",tag("form",0).append(e);e=new XMLHttpRequest;e.addEventListener("loadstart",function(){select("#phase_2 span")[0].innerHTML="uploading file"}),e.addEventListener("loadend",function(){select("#phase_2 span")[0].innerHTML="file upload completed"}),e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);if(0<e.error)return error(0);progress(e.progressURL,e.downloadURL)}},e.open("POST","https://cutter.ytmp3.nu/api/v1/upload"),e.send(n)});